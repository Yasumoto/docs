<p>If you can’t log into your computer, you can follow these instructions to reset the password for any user. Pop!_OS and Ubuntu allow for the root user to reset the password for any user account. In order to get to the root user, we need to restart the computer and use what’s called “single user mode”, which is the low level repair system for the computer.</p>

<h3 id="pop_os-1804-and-later">Pop!_OS 18.04 and Later</h3>

<p>On a fresh install Pop!_OS 18.04 and later, <u>systemd-boot</u> is used rather than <u>GRUB</u>.  Please follow these instructions to reset your password.  If your operating system is anything other than Pop!_OS 18.04 and later, please use the <a href="#grub">GRUB</a> section.</p>

<p>First, bring up the <u>systemd-boot</u> menu by holding down <kbd>SPACE</kbd> or the <kbd>ESC</kbd> key.  On the menu, choose <strong>Recovery Mode</strong>.</p>

<p><img src="/images/password/systemd-boot.png" alt="systemd-boot" /></p>

<p>Once the recovery operating system has opened, click <strong>Install Pop!_OS</strong> in the top left, and choose <strong>quit</strong>.  Then, press <kbd><span class="fl-pop-key"></span></kbd>+<kbd>T</kbd>/<kbd><i class="fl-ubuntu"></i></kbd> to open a terminal, and type in these commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsblk
</code></pre></div></div>

<p>This will show what the main internal drive is named, which will have 4 partitions on it.  We will be working with the 3rd partition.  If the main drive is an NVMe drive, it will be <code class="language-plaintext highlighter-rouge">/dev/nvme0n1p3</code> and if the drive is a SATA or regular M.2 drive, it will be <code class="language-plaintext highlighter-rouge">/dev/sda3</code>.</p>

<p>Next, run this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo mount /dev/sda3 /mnt
</code></pre></div></div>

<p>If the command fails and says <code class="language-plaintext highlighter-rouge">mount: /mnt: unknown filesystem type 'crypto_LUKS'</code>, then the hard drive has been encrypted, and additional commands are needed to unlock it.  If the command succeeds (no output), then skip these next steps:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cryptsetup luksOpen /dev/sda3 volume
sudo lvscan
sudo vgchange -ay
</code></pre></div></div>

<p>Take note as to what the volume group is called, substituting the correct info into this command.  Make sure that ‘-root’ is on the end:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo mount /dev/mapper/data-root /mnt
</code></pre></div></div>

<p>Next, regardless of whether the drive is encrypted or not, run these commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo chroot /mnt
ls /home
</code></pre></div></div>

<p>Take note of the users on this computer, then run this command to change a user’s password:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd john
</code></pre></div></div>

<p>Type in your new password, and then enter these commands:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exit
reboot
</code></pre></div></div>

<p>Now, enter the original passphrase. Here you will be prompted for the new passphrase, and then to confirm the new passphrase.</p>

<h3 id="grub">GRUB</h3>

<p>There are two ways to enter into the GRUB boot menu. The first is to restart your computer and tap <kbd>ESC</kbd> while the computer starts. The second is to power it off while it is starting up, which will make the menu show up on the next boot. Make sure to stop tapping <kbd>ESC</kbd> when the menu appears:</p>

<p><img src="/images/password/grub1.png" alt="Grub1" /></p>

<p>If you do tap <kbd>ESC</kbd> when the menu appears, a GRUB command prompt will appear:</p>

<p><img src="/images/password/prompt.png" alt="Prompt" /></p>

<p>If you get to the GRUB command prompt, type in <code class="language-plaintext highlighter-rouge">normal</code>, then press <kbd>ENTER</kbd> and immediately press <kbd>ESC</kbd>.</p>

<p>Once in the GRUB menu, choose the second option <strong>Advanced options for Ubuntu</strong>, then, choose the 3rd option <strong>Ubuntu, with Linux &lt;current kernel number&gt; (recovery mode)</strong>.</p>

<p><img src="/images/password/grub2.png" alt="Grub2" /></p>

<p>At the recovery menu, choose the <strong>root</strong> option, then press <kbd>Enter</kbd> to drop to a root prompt.</p>

<p><img src="/images/password/recovery.png" alt="Recovery" /></p>

<h3 id="root-prompt">Root Prompt</h3>

<p><strong>A note on the root prompt:</strong> Since the system is operating with only a single console, all output is printed to the screen. This can be really confusing, but nothing has changed – it’s just output. <strong>If your screen looks like the image below, with a timeout notice or similar,</strong> press Ctrl+C to return to the prompt and continue working. You will need to re-enter the command you were typing.</p>

<p><img src="/images/password/timeout.png" alt="Timeout in recovery mode" /></p>

<p>Now, type this command to make your hard drive editable:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mount -o rw,remount /
</code></pre></div></div>

<p>Then type this command to show what usernames are present on the computer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ls /home
</code></pre></div></div>

<p>Then, to change your password, type in this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>passwd april
</code></pre></div></div>

<p>(Change <code class="language-plaintext highlighter-rouge">april</code> to the actual user whose password you would like to reset, as seen in the output of <code class="language-plaintext highlighter-rouge">ls /home</code>)</p>

<p>Enter a new password, then press <kbd>Enter</kbd>. Even though you are typing, no text will be displayed as seen in the image below.</p>

<p><img src="/images/password/example.png" alt="Full commands to reset password" /></p>

<p>Enter the same password again to confirm, then press <kbd>Enter</kbd>.</p>

<p>If successful, you will see a message confirming `passwd: password updated successfully</p>

<p>You can now reboot:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>reboot
</code></pre></div></div>

<h3 id="change-the-encryption-passphrase-using-the-terminal">Change the encryption passphrase using the Terminal:</h3>

<p>This can be done in the operating system or in the recovery mode/partition.</p>

<p>First list the drives and partitions with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsblk
</code></pre></div></div>

<p>Then to change the passphrase:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo cryptsetup luksChangeKey /dev/sda3 -S 0
</code></pre></div></div>

<h3 id="change-the-encryption-passphrase-using-disks">Change the encryption passphrase using Disks:</h3>

<p>Click on the drive that has the OS installed on it on the left side of the <u>Disks</u> application. Then click on the LUKS partition (where the root partition is) and then click on the gear icon under the ‘Volumes’ section.</p>

<p><img src="/images/password/disks-change-passphrase.png" alt="GNOME Disks" /></p>
