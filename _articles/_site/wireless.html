<p>WiFi issues are influenced by many different factors, including:</p>

<ul>
  <li>Hardware (WiFi card, access point)</li>
  <li>Settings at both ends of the connection</li>
  <li>The local environment</li>
</ul>

<h3 id="basic-troubleshooting">Basic Troubleshooting</h3>

<p>If you’re having problems, try these steps first:</p>

<ul>
  <li>Try unplugging the wireless router or modem to reboot it.</li>
  <li>Try airplane mode by pressing <kbd>Fn</kbd>+<kbd>F11</kbd>, waiting 10s, then disabling.</li>
  <li>Try rebooting the computer.</li>
</ul>

<p>Some router settings can cause problems. Try adjusting your access point to these settings:</p>

<ul>
  <li>WPA2-AES is preferred over WPA/WPA2 mixed mode or TKIP.</li>
  <li>A channel width of 20 MHz in the 2.4 GHz band is more stable than automatic 20/40 MHz or fixed 40 MHz.</li>
  <li>Set 2.4Ghz and 5Ghz SSID names differently.</li>
  <li>Pick a fixed channel.  Use either 1, 6, or 11 in the 2.4 Ghz band, rather than automatic selection.</li>
  <li>Check if the router is set to N speeds only.  Auto B/G/N is preferred.</li>
  <li>Lower the max/burst speeds, turn off channel bonding, and reduce channel width. Setting the speed to 600 Mb/s or 450 Mb/s will use spread frequencies to achieve those speeds and may decrease stability. Try setting it to 289/300 Mb/s (N speed) or or 54 Mb/s (G speed).</li>
  <li>After making these changes, reboot the router.</li>
</ul>

<p>If the issues started after you applied updates, try running this command to make sure a bad WiFi driver has not been installed, then reboot your computer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt remove backport-iwlwifi-dkms
</code></pre></div></div>

<h3 id="advanced-troubleshooting">Advanced Troubleshooting</h3>

<p>If the above steps aren’t working, or you would like to fine tune and improve you connection, see the following steps.</p>

<h4 id="regulatory-domain">Regulatory Domain</h4>

<p>In many cases, it’s recommended to explicitly set the WiFi regulatory domain. Check yours with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo iw reg get
</code></pre></div></div>

<p>If you get 00, that is a one-size-maybe-fits-all setting. Find yours here: <a href="http://wikipedia.org/wiki/ISO_3166-1">ISO_3166</a>.</p>

<p>And set it permanently with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo gedit /etc/default/crda
</code></pre></div></div>

<p>Change the last line to read:</p>

<blockquote>
  <p>REGDOMAIN=US</p>
</blockquote>

<p>Save and close the text editor.</p>

<h4 id="ipv6">IPv6</h4>

<p>Unless specifically required, you can set IPv6 to Ignore in Network Manager. Go to <strong>System Settings</strong> → <strong>Network</strong> and click the orange arrow next to your network, then click <strong>Settings</strong> → <strong>Network</strong> → <strong>Ethernet</strong> → <strong>Gear Icon</strong> → <strong>IPv6 Settings</strong> then change <strong>Automatic</strong> to <strong>Disable</strong>.</p>

<h4 id="antenna-aggregation">Antenna Aggregation</h4>

<p>If these changes do not help, you can try enabling antenna aggregation:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo modprobe -r iwlwifi
sudo modprobe iwlwifi 11n_disable=8
</code></pre></div></div>

<p>Then, test to see if that helps. To make it permanent:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo gedit /etc/modprobe.d/iwlwifi.conf
</code></pre></div></div>

<p>Then, add this line to the bottom (effective upon reboot):</p>

<blockquote>
  <p>options iwlwifi 11n_disable=8</p>
</blockquote>

<h4 id="n-mode">N Mode</h4>

<p>You can try disabling N mode completely by using <code class="language-plaintext highlighter-rouge">11n_disable=1</code> in the previous settings. N mode can be more unstable than G mode, and the speed gained isn’t typically useful as total bandwidth available in/out from/to the Internet is less than N speeds.</p>

<h4 id="bluetooth-coexistence">Bluetooth Coexistence</h4>

<p>If you have trouble with a Bluetooth headset and keeping a steady downlink speed, try disabling Bluetooth coexistence in the configuration file above:</p>

<blockquote>
  <p>options iwlwifi bt_coex_active=0</p>
</blockquote>

<h4 id="power-management">Power Management</h4>

<p>Another way to help with Wifi issues is to turn off power management for the hardware. To do so, edit the configuration file with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo gedit /etc/NetworkManager/conf.d/default-wifi-powersave-on.conf
</code></pre></div></div>

<p>And change the file to read (effective upon reboot):</p>

<blockquote>
  <p>[connection]<br />
wifi.powersave = 2</p>
</blockquote>

<p>If <code class="language-plaintext highlighter-rouge">tlp</code> is installed, take a look at the settings file found here for additional Wifi power saving being enabled:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo gedit /etc/default/tlp
</code></pre></div></div>

<h2 id="useful-programs">Useful Programs</h2>

<p>The program <u>wavemon</u> can be used to see info about nearby access points, such as power levels, channels, and BSSIDs.  It can be installed with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install wavemon
</code></pre></div></div>

<p>And run with this command:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo wavemon
</code></pre></div></div>

<h2 id="useful-commands">Useful Commands</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iwevent
</code></pre></div></div>

<p>Run this command to watch what the Wifi hardware is doing.  Pay attention to the disconnect reasons, and ignore the scans.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo systemctl restart NetworkManager
</code></pre></div></div>

<p>This command will restart the service that manages all Internet traffic on the computer, which is usually easier than restarting the computer.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dmesg | grep iwlwifi
</code></pre></div></div>

<p>This will check the hardware startup and driver loading messages.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lspci | grep Network
</code></pre></div></div>

<p>This will check if the hardware is being detected by the kernel.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsmod | grep iwlwifi
</code></pre></div></div>

<p>This will check to see if the device driver (module) is loaded.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo rm /etc/NetworkManager/system-connections/*
</code></pre></div></div>

<p>This will erase the stored information about all wireless access points.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install --reinstall network-manager
</code></pre></div></div>

<p>This will reinstall network-manager, which can fix some network issues.</p>

<p><strong>NOTE:</strong> After reinstalling the above packages, fully shut down the machine and then power it back on, rather than rebooting. This ensures the hardware completely resets.</p>

<h2 id="additional-info">Additional Info</h2>

<p>Wifi Speeds and Frequencies:</p>

<ul>
  <li>54 Mb/s uses the 802.11g &amp; 802.11b standards.</li>
  <li>145 Mb/s and 300 Mb/s modes use the 802.11n standard and 20MHz or 40MHz bandwidths.</li>
  <li>300Mbps / 40Mhz will provide the maximum performance in most cases.</li>
  <li>145Mbps / 20MHz will work better in areas with more access points.</li>
  <li>450Mbps uses a 60Mhz channel width and 600Mbps uses a 80Mhz channel width, and is typically less stable.</li>
</ul>

<p>The name of the Linux driver for Intel Wifi cards is called <u>iwlwifi</u> and is included in the kernel by default. All information about the driver can be found here:</p>

<p><a href="https://wireless.wiki.kernel.org/en/users/drivers/iwlwifi">wireless.wiki.kernel.org/en/users/drivers/iwlwifi</a></p>

<p>The newest version of the <u>linux-firmware</u> package, which contains the iwlwifi driver, can be found here:</p>

<p><a href="https://mirrors.kernel.org/ubuntu/pool/main/l/linux-firmware">mirrors.kernel.org/ubuntu/pool/main/l/linux-firmware</a></p>

<p>Sometimes the newest version of the firmware will clear up occasional bugs.  Please download the newest <code class="language-plaintext highlighter-rouge">.deb</code> package.</p>
