<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <meta name="theme-color" content="#574e4a">

    <title>Recovery Partition - System76 Support</title>
    <meta property="og:title" content="Recovery Partition - System76 Support">
    <meta itemprop="name" content="Recovery Partition - System76 Support">
    <meta name="twitter:title" content="Recovery Partition - System76 Support">

    <meta name="description" content="Here is how to use the recovery partition to repair, refresh or reinstall your operating system.
">
    <meta property="og:description" content="Here is how to use the recovery partition to repair, refresh or reinstall your operating system.
">
    <meta itemprop="description" content="Here is how to use the recovery partition to repair, refresh or reinstall your operating system.
">
    <meta name="twitter:description" content="Here is how to use the recovery partition to repair, refresh or reinstall your operating system.
">

    <meta name="keywords" content="recovery reset locked out crash reinstall refresh repair">

    
    <meta property="og:image" content="http://support.system76.com/images/pop-icon.png" />
    <meta name="twitter:image:src" content="http://support.system76.com/images/pop-icon.png">
    

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@system76">
    <meta name="twitter:creator" content="@system76">


    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://system76.com/images/touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://system76.com/images/touch-icon-ipad-retina.png">
    <link rel="touch-icon" sizes="196x196" href="https://system76.com/images/icon-196.png">
    <link rel="icon" sizes="196x196" href="https://system76.com/images/icon-196.png">

    <link rel="stylesheet" type="text/css" media="all" href="https://system76.com/stylesheets/app.css">
    <link rel="stylesheet" href="/css/main.css">

    <!--[if lt IE 10]><script>document.documentElement.className += " legacy";</script><![endif]-->

        <script>
        (function() {
            var _fbq = window._fbq || (window._fbq = []);
            if (!_fbq.loaded) {
                var fbds = document.createElement('script');
                fbds.async = true;
                fbds.src = '//connect.facebook.net/en_US/fbds.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(fbds, s);
                _fbq.loaded = true;
            }
        })();
        window._fbq = window._fbq || [];
        </script>

        <script src="//platform.twitter.com/oct.js" type="text/javascript"></script>

        <script>
        var fbSent = false;

        function facebookStatusChangeCallback(response) {
            if (response.status === 'connected' && fbSent) {
                window.oauthSuccess('facebook', response.authResponse.accessToken);
            }
        }

        function facebookCheckLoginState() {
            FB.getLoginStatus(function(response) {
                facebookStatusChangeCallback(response);
            });
        }

        function facebookLogin() {
            fbSent = true;
            FB.login(
                facebookCheckLoginState,
                {
                    scope: 'email'
                }
            );
        }

        window.fbAsyncInit = function() {
            FB.init({
                appId: '346948125501334',
                cookie: true,
                xfbml: true,
                version: 'v2.1'
            });

            FB.getLoginStatus(function(response) {
                facebookStatusChangeCallback(response);
            });
        };

        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/en_US/sdk.js";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
        </script>

        <script>
        function githubLogin() {
            var gitHubWindow = popupCenter(
                "https://github.com/login/oauth/authorize?" +
                "client_id=dc1b6955f316f6f4633b" +
                "&scope=user,user:email",
                "GitHub"+Date.now(),
                1024,
                600
            );
        }
        </script>

        <meta name="google-signin-clientid" content="118911812273-tsqn79u4hm451chlbhm1gkkt63ttgoq9.apps.googleusercontent.com" />
        <meta name="google-signin-scope" content="email" />
        <meta name="google-signin-cookiepolicy" content="single_host_origin" />
        <script src="https://apis.google.com/js/client:platform.js?onload=googleRender" async defer></script>

        <script>
        function googleLogin() {
            gapi.auth.signIn({
                'callback': googleSigninCallback
            });
        }

        function googleSigninCallback(authResult) {
            if (authResult['status']['signed_in']) {
                if( authResult['status']['method'] == 'PROMPT' ) {
                    window.oauthSuccess("google", authResult['access_token']);
                }
            }
        }
        </script>

        <link href="https://cdn.rawgit.com/Lukas-W/font-linux/v0.5/assets/font-linux.css" rel="stylesheet">

</head>

  <body class="path-support">
    <div id="page-container">
        <header id="masthead" class="main">
	<nav>
		<a id="logo" class="home" href="https://system76.com"></a>

		<ul class="quick" id="nav-links">
			<li>
				<a id="link-contact" href="https://system76.com/contact" title="Contact">
					<i class="fa fa-comments"></i>
					Contact
				</a>
			</li>

			<li>
				<a id="link-support" href="https://support.system76.com" title="Support">
					<i class="fa fa-life-ring"></i>
					Support
				</a>
			</li>

			<li>
				<a id="link-account" href="https://system76.com/my-account" title="Account">
					<i class="fa fa-user"></i>
					Account
				</a>
			</li>
		</ul>

		<ul id="nav-links" class="categories">
			<li><a href="https://system76.com/laptops">Laptops</a></li>
			<li><a href="https://system76.com/desktops">Desktops</a></li>
			<li><a href="https://system76.com/desktops/meerkat">Mini</a></li>
			<li><a href="https://system76.com/servers">Servers</a></li>
			<li><a href="https://system76.com/pop">Pop!_OS</a></li>
		</ul>
	</nav>
</header>


  <header id="page-title">
    <div class="row">
      <h1 class="small-12 columns greeting">
        <a href="/" title="Back to Support"><i class="fa fa-arrow-left"></i></a>
        Recovery Partition
        <a href="https://github.com/system76/docs/edit/master/_articles/pop-recovery.md" class="button"><i class="fa fa-github"></i> Edit on GitHub</a>
      </h1>
    </div>
  </header>


        <div class="row">
    <div class="small-12 small-centered medium-10 large-8 columns">
        <h1 id="recovery-partition">Recovery Partition</h1>

<p>The recovery partition on this operating system is a full copy of the Pop!_OS installation disk. It can be used exactly the same as if a live disk copy of Pop!_OS was booted from a USB drive. The existing operating system can be repaired or reinstalled from the recovery mode. You can also perform a refresh install, which allows you to reinstall without losing any user data or data in your home directory, or opt to do a fresh install, which will essentially reset all OS data. Refresh Installs are only available on a fresh install of Pop!_OS 19.04 and above.</p>

<p>To boot into recovery mode, bring up the <u>systemd-boot</u> menu by holding down <kbd>SPACE</kbd> while the system is booting. On the menu, choose <strong>Pop!_OS Recovery</strong>.</p>

<p><img src="/images/pop-recovery/systemd-boot.png" alt="systemd-boot" /></p>

<h2 id="table-of-contents">Table of Contents</h2>

<ul>
  <li><a href="/articles/pop-recovery/#repair">Repair</a></li>
  <li><a href="/articles/pop-recovery/#refresh-install">Refresh Install</a></li>
  <li><a href="/articles/pop-recovery/#reinstall">Reinstall</a></li>
</ul>

<h2 id="repair">Repair</h2>

<p>If the existing system needs to be repaired, then click the <strong>Install Pop!_OS</strong> in the top left, and choose <strong>quit</strong>.</p>

<p>To access to the existing OS drive and run the package manager <a href="/articles/package-manager-pop/">repair commands</a>, the following commands will need to be run:</p>

<p>First, press <kbd><span class="fl-pop-key"></span></kbd>+<kbd>T</kbd>/<kbd><i class="fl-ubuntu"></i></kbd>+<kbd>T</kbd> to open a terminal, then type this command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsblk
</code></pre></div></div>

<p>This will show you the name of the main internal drive, which will have 4 partitions on it.  We will be working with the 3rd partition.  If the main drive is an NVMe drive, it will be called <code class="language-plaintext highlighter-rouge">/dev/nvme0n1p3</code> and if the drive is a SATA or regular M.2 drive, it will be called <code class="language-plaintext highlighter-rouge">/dev/sda3</code>.</p>

<p>Next, run this command:</p>

<table>
  <tbody>
    <tr>
      <td><strong>SATA Drives</strong></td>
      <td><strong>NVMe Drives</strong></td>
    </tr>
    <tr>
      <td>sudo mount /dev/sda3 /mnt</td>
      <td>sudo mount /dev/nvme0n1p3 /mnt</td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong> Each box is one single command.</p>

<p>If the command fails and says <code class="language-plaintext highlighter-rouge">mount: /mnt: unknown filesystem type 'crypto_LUKS'</code>, then the hard drive has been encrypted, and additional commands are needed to unlock it.</p>

<h3 id="encrypted-disk">Encrypted Disk</h3>

<p>To get access to an encrypted disk, these additional commands need to be run in order to unlock the disk.  Please use the <code class="language-plaintext highlighter-rouge">lsblk</code> command described above to determine the correct drive and partition.</p>

<table>
  <tbody>
    <tr>
      <td><strong>SATA Drives</strong></td>
      <td><strong>NVMe Drives</strong></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">sudo cryptsetup luksOpen /dev/sda3 cryptdata</code></td>
      <td><code class="language-plaintext highlighter-rouge">sudo cryptsetup luksOpen /dev/nvme0n1p3 cryptdata</code></td>
    </tr>
  </tbody>
</table>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>lvscan
<span class="nb">sudo </span>vgchange <span class="nt">-ay</span>
</code></pre></div></div>

<p><strong>Note:</strong> Pay attention to what the cryptdata group is called. If it is named something other than ‘data-root’ Substitute the correct info into this next command.  Make sure that <code class="language-plaintext highlighter-rouge">-root</code> is on the end:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>mount /dev/mapper/data-root /mnt
</code></pre></div></div>

<p>And now the existing hard drive can be accessed by going to the <code class="language-plaintext highlighter-rouge">/mnt</code> folder.  To use the <u>Files</u> program, go to ‘+ Other Locations’ -&gt; ‘Computer’ and then click on the <code class="language-plaintext highlighter-rouge">/mnt</code> folder.</p>

<h2 id="chroot">Chroot</h2>

<p><u>chroot</u> is the way to run commands as if the existing operating system had been booted.  Once these commands are run, then package manager (<u>apt</u>) and other system level commands can be run.</p>

<p>The EFI partition is usually around 512MB so that would be the partition that we replace in the next command. The Recovery Partition is around 4GB as well.</p>

<table>
  <tbody>
    <tr>
      <td><strong>SATA Drives</strong></td>
      <td><strong>NVMe Drives</strong></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">sudo mount /dev/sda1 /mnt/boot/efi</code></td>
      <td><code class="language-plaintext highlighter-rouge">sudo mount /dev/nvme0n1p1 /mnt/boot/efi</code></td>
    </tr>
  </tbody>
</table>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for </span>i <span class="k">in </span>dev dev/pts proc sys run<span class="p">;</span> <span class="k">do </span><span class="nb">sudo </span>mount <span class="nt">-B</span> <span class="nv">$i</span> /mnt/<span class="nv">$i</span><span class="p">;</span> <span class="k">done 
</span><span class="nb">sudo cp</span> <span class="nt">-n</span> /etc/resolv.conf /mnt/etc/
<span class="nb">sudo chroot</span> /mnt
</code></pre></div></div>

<p>With this last command you will have root access to your installed system. You can also access your files with <u>files</u> via “Other Locations” &gt; Computer &gt; /mnt.</p>

<h3 id="after-chroot">After Chroot</h3>

<p>Once you are done accessing files or running commands in your installed OS, you can exit from the <u>chroot</u> and reboot the computer, run these commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">exit
</span>reboot
</code></pre></div></div>

<h2 id="refresh-install">Refresh Install</h2>

<p>Starting with new installations of Pop!_OS 19.04 (not through upgrading) the installer will include a new Refresh Install option that allows you to reinstall the OS to be reinstalled without losing user account information and data in the home directory. However, your applications will still need to be reinstalled.</p>

<p><img src="/images/pop-recovery/recovery-install-page-20.04.png" alt="Refresh Install Option" /></p>

<h3 id="reinstall">Reinstall</h3>

<p>Once the recovery operating system has opened, the <u>Pop Installer</u> will start automatically.  If the system needs to be reinstalled, go ahead and continue the installation steps as demonstrated <a href="/articles/install-pop/">here</a>.</p>

<p>If files need to be copied off before reinstall, open the <u>Files</u> program to get access to the existing install.  If the existing install is encrypted, please see the <a href="#encrypted-disk">encrypted disk</a> instructions above.</p>

    </div>
    <div class="small-12 small-centered medium-10 large-8 columns timestamp">
        <p>Article last modified: 2021-06-04</p>
    </div>
</div>

    </div>
    <footer id="foot">
    <div id="foot-links" class="row">
        <ul class="small-5 medium-2 columns">
            <li><a href="https://system76.com/contact">Contact</a></li>
            <li><a href="https://system76.com/support">Support</a></li>
            <li><a href="https://system76.com/about">About Us</a></li>
            <li><a href="http://blog.system76.com">Blog</a></li>
            <li><a href="https://system76.com/careers">Careers</a></li>
        </ul>
        <ul class="small-7 medium-4 columns">
            <li><a href="https://system76.com/shipping">Shipping Information</a></li>
            <li><a href="https://system76.com/warranty">Warranty &amp; Returns</a></li>
            <li><a href="https://system76.com/privacy">Privacy Policy</a></li>
            <li><a href="https://system76.com/disclaimer">Disclaimer</a></li>
            <li><a href="https://system76.com/terms">Terms &amp; Conditions</a></li>
        </ul>
        <ul id="social-links" class="small-12 medium-6 columns">
            <li><a href="https://www.facebook.com/system76/"><i class="fa fa-facebook"></i></a></li>
            <li><a href="https://twitter.com/system76/"><i class="fa fa-twitter"></i></a></li>
            <li><a href="https://www.pinterest.com/system76/"><i class="fa fa-pinterest"></i></a></li>
        </ul>
    </div>
    <div id="copyright" class="text-center">Copyright &copy; 2021 System76, Inc. </div>

    <div class="disclaimer text-center">* All financing prices are based on the advertised price at 10% APR paid over 12 months.</div>

    <div id="trademarks" class="text-center">Intel, the Intel Logo, Intel Core, and Xeon are trademarks of Intel Corporation in the U.S. and/or other countries.</div>
</footer>

<script src="https://system76.com/scripts/thinkbott1k.js"></script>

<!--[if lt IE 10]>
<div id="legacy-warning">
<h1>System76 is built on modern web technologies your browser doesn&rsquo;t support.</h1>
<p>This version of Internet Explorer is out of date and may contain bugs or security vulnerabilities. Please <a href="http://browsehappy.com/">upgrade</a> to IE 11 or an alternative web browser.</p>
<p>If you have questions about an order or require support, feel free to <a href="/contact">contact us</a>.</p>
<div id="legacy-warning-buttons">
<a href="#" onClick="document.getElementById('legacy-warning').style.display = 'none';">Dismiss</a>
<a class="primary" href="http://browsehappy.com/">Learn More</a>
</div>
</div>
<![endif]-->

  </body>
</html>
